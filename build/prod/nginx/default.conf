server {
    listen 80;
    listen [::]:80;

    server_name localhost;
    root        /app/src/public;
    index       index.php;

    add_header X-Frame-Options "SAMEORIGIN";
    add_header X-Content-Type-Options "nosniff";

    # Locations
    location = /favicon.ico { log_not_found off; access_log off; }
    location = /robots.txt { allow all; log_not_found off; access_log off; }
    location ~ \.css { add_header  Content-Type    text/css; }
    location ~ \.js { add_header  Content-Type    application/x-javascript; }
    location ~ /\.(?!well-known).* { deny all; }
    location ^~ /_wdt { try_files $uri /index.php?$query_string; }

    location / {
        try_files $uri $uri/ /index.php?$args;
    }

    location ~ \.php$ {
        include              fastcgi_params;
        fastcgi_pass         unix:/tmp/php-fpm.sock;
        fastcgi_read_timeout 60s;
        fastcgi_send_timeout 60s;
        fastcgi_param        SCRIPT_FILENAME /app/src/public$fastcgi_script_name;
        fastcgi_hide_header  X-Powered-By;
        fastcgi_param        PHP_VALUE "log_errors=on
        error_log=/dev/stderr";
    }

    location ~* \.(css|js|jpg|jpeg|png|gif|ico|svg|woff|woff2|ttf|eot|otf|webp|avif|mp4|webm)$ {
        access_log    off;
        log_not_found off;
        expires       max;
    }

    access_log /dev/stdout;
    error_log  /dev/stderr warn;
}